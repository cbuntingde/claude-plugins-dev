{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://claude-plugins-dev/schemas/plugin.json",
  "title": "Claude Plugin Configuration",
  "description": "Validates .claude-plugin/plugin.json structure for marketplace plugins",
  "type": "object",
  "required": ["name", "version", "description", "author"],
  "properties": {
    "name": {
      "type": "string",
      "pattern": "^[a-z0-9][a-z0-9-]*[a-z0-9]$",
      "minLength": 1,
      "maxLength": 100,
      "examples": ["style-guide-enforcer", "api-client-generator"],
      "description": "Plugin name in kebab-case"
    },
    "version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "examples": ["1.0.0", "2.1.3"],
      "description": "Semantic version number (x.y.z)"
    },
    "description": {
      "type": "string",
      "minLength": 10,
      "maxLength": 500,
      "description": "Brief plugin description"
    },
    "author": {
      "type": "object",
      "required": ["name", "email"],
      "properties": {
        "name": {
          "type": "string",
          "minLength": 1,
          "maxLength": 100
        },
        "email": {
          "type": "string",
          "pattern": "^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$"
        },
        "url": {
          "type": "string",
          "pattern": "^https?://",
          "description": "Author's website URL"
        }
      },
      "additionalProperties": false
    },
    "license": {
      "type": "string",
      "enum": ["MIT", "Apache-2.0", "BSD-3-Clause", "BSD-2-Clause", "ISC", "UNLICENSE", "GPL-3.0", "GPL-2.0"],
      "default": "MIT"
    },
    "homepage": {
      "type": "string",
      "pattern": "^https?://",
      "description": "URL to plugin homepage"
    },
    "bugs": {
      "type": "object",
      "properties": {
        "url": { "type": "string", "pattern": "^https?://" },
        "email": { "type": "string", "pattern": "^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$" }
      },
      "additionalProperties": false,
      "anyOf": [
        { "required": ["url"] },
        { "required": ["email"] }
      ]
    },
    "engines": {
      "type": "object",
      "properties": {
        "claude": { "type": "string", "pattern": "^>=?\\d+\\.\\d+" }
      },
      "additionalProperties": false
    },
    "keywords": {
      "type": "array",
      "items": { "type": "string", "pattern": "^[a-z0-9][a-z0-9-]*[a-z0-9]$" },
      "minItems": 1,
      "maxItems": 10
    },
    "categories": {
      "type": "array",
      "items": {
        "type": "string",
        "enum": [
          "code-quality",
          "performance",
          "devops",
          "testing",
          "api",
          "documentation",
          "database",
          "security",
          "architecture",
          "accessibility",
          "learning",
          "productivity"
        ]
      },
      "minItems": 1,
      "maxItems": 3
    },
    "commands": {
      "type": "array",
      "items": {
        "type": "string",
        "pattern": "^\\./.*\\.md$"
      },
      "description": "List of command definition files",
      "minItems": 0
    },
    "agents": {
      "type": "array",
      "items": {
        "type": "string",
        "pattern": "^\\./.*\\.md$"
      },
      "description": "List of agent definition files",
      "minItems": 0
    },
    "skills": {
      "type": "array",
      "items": {
        "type": "string",
        "pattern": "^\\./.*/$"
      },
      "description": "List of skill directory paths",
      "minItems": 0
    },
    "hooks": {
      "type": "object",
      "description": "Hook configurations for the plugin",
      "properties": {},
      "additionalProperties": true
    }
  },
  "additionalProperties": false
}
