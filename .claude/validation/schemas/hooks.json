{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://github.com/cbuntingde/claude-plugins-dev/.claude/validation/schemas/hooks.json",
  "title": "Claude Plugin Hooks Schema",
  "description": "Schema for hooks/hooks.json files",
  "type": "object",
  "required": ["hooks"],
  "additionalProperties": false,
  "properties": {
    "hooks": {
      "type": "object",
      "description": "Map of hook type names to hook configurations",
      "patternProperties": {
        "^(PostToolUse|PostToolUseFailure|PreToolUse|SessionStart|SessionEnd|UserPromptSubmit|PermissionRequest|PreCompact)$": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["hooks"],
            "additionalProperties": false,
            "properties": {
              "matcher": {
                "type": "string",
                "description": "Regex pattern to match against hook context"
              },
              "hooks": {
                "type": "array",
                "items": {
                  "oneOf": [
                    {
                      "type": "object",
                      "required": ["type", "command"],
                      "additionalProperties": false,
                      "properties": {
                        "type": {
                          "const": "command"
                        },
                        "command": {
                          "type": "string",
                          "minLength": 1
                        },
                        "description": {
                          "type": "string"
                        },
                        "runInBackground": {
                          "type": "boolean"
                        },
                        "timeout": {
                          "type": "integer",
                          "minimum": 0,
                          "maximum": 600000
                        }
                      }
                    },
                    {
                      "type": "object",
                      "required": ["type", "prompt"],
                      "additionalProperties": false,
                      "properties": {
                        "type": {
                          "const": "prompt"
                        },
                        "prompt": {
                          "type": "string",
                          "minLength": 1
                        },
                        "description": {
                          "type": "string"
                        }
                      }
                    },
                    {
                      "type": "object",
                      "required": ["type", "agent", "messages"],
                      "additionalProperties": false,
                      "properties": {
                        "type": {
                          "const": "agent"
                        },
                        "agent": {
                          "type": "string",
                          "minLength": 1
                        },
                        "description": {
                          "type": "string"
                        },
                        "tools": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        },
                        "messages": {
                          "type": "array",
                          "minItems": 1,
                          "items": {
                            "type": "object",
                            "required": ["role", "content"],
                            "additionalProperties": false,
                            "properties": {
                              "role": {
                                "type": "string",
                                "enum": ["user", "assistant", "system"]
                              },
                              "content": {
                                "type": "string",
                                "minLength": 1
                              }
                            }
                          }
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        }
      }
    }
  }
}
